# ASAP

## Overview

ASAP (Automated Sound Analysis Pipeline) is an R toolkit designed for
the longitudinal analysis of birdsong development, specifically
optimized for tracking and studying the long-term vocalization patterns
of zebra finches.

The pipeline introduces a dedicated SAP object, which streamlines the
processing of recordings from the SAP2011 system or other sound data
organized with similar structures. Additionally, ASAP is built with
flexibility in mind, allowing for the integration of other objects to
ensure compatibility with various recording platforms.

### Key Features

- **Bout Detection**: Automatically identifies periods of singing within
  recordings.

- **Motif Extraction**: Extracts recurring song motifs for in-depth
  analysis.

- **Syllable Segmentation**: Breaks down songs into individual syllables
  for detailed study.

- **Template Matching**: Compares and matches song patterns against
  predefined templates.

- **Feature Extraction**: Extracts detailed temporal and spectral
  features from vocalizations.

- **Standardized Analytical Workflows**: Utilizes predefined workflows
  for consistent and efficient analysis.

## Installation

To install ASAP, I recommend using remotes:

``` r
require(remotes)
remotes::install_github("LXiao06/ASAP")
```

## Example

### Detecting Bout Boundaries and Syllable Segmentation

This example demonstrates how to use functions to detect **bout
boundaries** and perform **syllable segmentation** on a single WAV file
of a zebra finch recording.

``` r
library(ASAP)
# Get path to example WAV file
wav_file <- system.file("extdata", "zf_example.wav", package = "ASAP")
  
# Find bout
bouts <- find_bout(wav_file, rms_threshold= 0.1, min_duration = 0.7)
```

![](reference/figures/README-example-code1-1.png)

``` r

# Segmentation 
syllables <- segment(wav_file, start_time = 1, end_time = 5, flim = c(1, 8),
                     silence_threshold = 0.01, min_syllable_ms = 20, 
                     max_syllable_ms = 240, min_level_db = 10, verbose = FALSE)
```

![](reference/figures/README-example-code1-2.png)

### Standardized Song Analysis Pipeline for Motif Analysis

This example demonstrates a **song analysis pipeline** initiated by
creating a SAP object, which tracks and visualizes motif changes over
time using heatmaps and latent space projections.

``` r
# Create sap object 
sap <- create_sap_object(
  base_path = "/path/to/your/wav/file/directory",
  subfolders_to_include = c("190", "201", "203"),
  labels = c("BL", "Post", "Rec")
)

# A standardized pipeline for motif analysis
sap <- sap |>
  create_audio_clip(indices = 1, start_time = 1, end_time = 2.5,
                    clip_names = "m1") |>
  create_template(template_name = "d", clip_name = "m1",
                  start_time = 0.72,   end_time =  0.84,
                  freq_min = 1,  freq_max = 10,
                  threshold = 0.5, write_template = TRUE) |>
  detect_template(template_name = "d") |>
  find_motif(template_name = "d", pre_time = 0.7, lag_time = 0.5) |>
  analyze_spectral(balanced = TRUE) |>
  find_clusters() |>
  run_umap() |>
  create_trajectory_matrix(data_type = "feat.embeds", clusters = c(0, 1), balanced = TRUE) |>
  run_pca()  |>
  run_umap(data_type = "traj_mat", min_dist = 0.5)


# Visualization
sap <- sap |>
  plot_heatmap(balanced = TRUE, ordered = TRUE)|>
  plot_umap(split.by = "label") |>
  plot_umap2(data_type = "traj.embeds", overlay_mode = TRUE, 
             base_label = "BL", compare_labels ="Rec")
```

![](reference/figures/sap_analysis.png)

# Package index

## All functions

- [`FF()`](https://lxiao06.github.io/ASAP/reference/Fundamental_Frequency.md)
  : Fundamental Frequency Analysis and Visualization
- [`amp_env()`](https://lxiao06.github.io/ASAP/reference/amp_env.md) :
  Calculate Amplitude Envelope for Audio Segment
- [`analyze_spectral()`](https://lxiao06.github.io/ASAP/reference/analyze_spectral.md)
  : Analyze Spectral Features of Audio Segments
- [`anova_analysis()`](https://lxiao06.github.io/ASAP/reference/anova_analysis.md)
  : Perform ANOVA and Multiple Comparisons Analysis
- [`as_segment()`](https://lxiao06.github.io/ASAP/reference/as_segment.md)
  : Convert data to a segment object
- [`auto_label()`](https://lxiao06.github.io/ASAP/reference/auto_label.md)
  : Automatic Syllable Labeling in Song Motif
- [`compute_wav_durations()`](https://lxiao06.github.io/ASAP/reference/compute_wav_durations.md)
  : Compute WAV File Durations
- [`create_audio_clip()`](https://lxiao06.github.io/ASAP/reference/create_audio_clip.md)
  : Create Audio Clips from Sound Files
- [`create_sap_metadata()`](https://lxiao06.github.io/ASAP/reference/create_sap_metadata.md)
  : Create metadata for audio files recorded by SAP2011 (Sound Analysis
  Pro)
- [`create_sap_object()`](https://lxiao06.github.io/ASAP/reference/create_sap_object.md)
  : Create a Sound Analysis Pro (SAP) Object from Audio Recordings
- [`create_template()`](https://lxiao06.github.io/ASAP/reference/create_template.md)
  : Create Correlation Templates for Song Analysis
- [`create_trajectory_matrix()`](https://lxiao06.github.io/ASAP/reference/create_trajectory_matrix.md)
  : Create Spectrogram Matrices for Song Trajectory Analysis
- [`detect_template()`](https://lxiao06.github.io/ASAP/reference/detect_template.md)
  : Detect Templates in Song Data
- [`extract_spec()`](https://lxiao06.github.io/ASAP/reference/extract_spec.md)
  : Extract and pad spectrograms from audio segments
- [`find_bout()`](https://lxiao06.github.io/ASAP/reference/find_bout.md)
  : Detect Song Bouts in Audio Recordings
- [`find_motif()`](https://lxiao06.github.io/ASAP/reference/find_motif.md)
  : Find Motifs in Song Data
- [`goodness()`](https://lxiao06.github.io/ASAP/reference/goodness.md) :
  Pitch Goodness Analysis
- [`manual_label()`](https://lxiao06.github.io/ASAP/reference/manual_label.md)
  : Manual Syllable Labeling for Bird Song Analysis
- [`plot_clusters()`](https://lxiao06.github.io/ASAP/reference/plot_clusters.md)
  : Plot Clusters in Time Series Data
- [`plot_heatmap()`](https://lxiao06.github.io/ASAP/reference/plot_heatmap.md)
  : Plot Heatmap of Amplitude Envelopes
- [`plot_motif_boundaries()`](https://lxiao06.github.io/ASAP/reference/plot_motif_boundaries.md)
  : Visualize Motif Boundaries in Audio Data
- [`plot_traces()`](https://lxiao06.github.io/ASAP/reference/plot_traces.md)
  : Plot Traces of Song Features
- [`plot_umap()`](https://lxiao06.github.io/ASAP/reference/plot_umap.md)
  : Plot UMAP Visualization
- [`plot_umap2()`](https://lxiao06.github.io/ASAP/reference/plot_umap2.md)
  : Plot UMAP Visualization for Trajectory Analysis
- [`print(`*`<segment>`*`)`](https://lxiao06.github.io/ASAP/reference/print.segment.md)
  : Print method for segment objects
- [`refine_FF()`](https://lxiao06.github.io/ASAP/reference/refine_FF.md)
  : Refine Fundamental Frequency Detection
- [`refine_motif_boundaries()`](https://lxiao06.github.io/ASAP/reference/refine_motif_boundaries.md)
  : Refine Motif Boundaries Using Segment Alignment
- [`refine_sh()`](https://lxiao06.github.io/ASAP/reference/refine_sh.md)
  : Refine Spectral Entropy Using Temporal Template
- [`run_pca()`](https://lxiao06.github.io/ASAP/reference/run_pca.md) :
  Run Principal Component Analysis
- [`run_umap()`](https://lxiao06.github.io/ASAP/reference/run_umap.md) :
  Run UMAP Dimensionality Reduction
- [`segment()`](https://lxiao06.github.io/ASAP/reference/segment.md) :
  Segment Audio into Syllables
- [`spectral_entropy()`](https://lxiao06.github.io/ASAP/reference/spectral_entropy.md)
  : Calculate Spectral Entropy for Audio Segments
- [`summary(`*`<segment>`*`)`](https://lxiao06.github.io/ASAP/reference/summary.segment.md)
  : Summary method for segment objects
- [`visualize_segments()`](https://lxiao06.github.io/ASAP/reference/visualize_segments.md)
  : Visualize Song Segments
- [`visualize_song()`](https://lxiao06.github.io/ASAP/reference/visualize_song.md)
  : Visualize Song Data

# Articles

### Single WAV File Analysis

Learn ASAP functions using individual audio files

- [Overview: Basic Audio
  Analysis](https://lxiao06.github.io/ASAP/articles/single_wav_analysis.md):
- [Motif
  Detection](https://lxiao06.github.io/ASAP/articles/motif_detection.md):

### Longitudinal Recording Analysis with SAP Object

Batch processing of recordings across developmental time points

- [Constructing SAP
  Object](https://lxiao06.github.io/ASAP/articles/construct_sap_object.md):
- [Longitudinal Motif
  Detection](https://lxiao06.github.io/ASAP/articles/longitudinal_motif_detection.md):
